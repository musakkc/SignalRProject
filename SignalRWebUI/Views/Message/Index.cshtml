@model List<ResultMessageDto>
@{
	ViewData["Title"] = "Index";
	Layout = "~/Views/AdminLayout/Index.cshtml";
	int count = 0;
}  
<div class="content">
	<div class="container-fluid">
		<h4 class="page-title">Gelen Mesajlar</h4>
		<div class="row">
			<div class="col-md-12">

				<div class="card">
					<div class="card-header">
						<div class="card-title">Mesaj Listesi</div>
					</div>
					<div class="card-body">
						<div class="card-sub">
							Müşterilerden gelen mesajları buradan görüntüleyebilir ve yönetebilirsiniz.
						</div>
						<table class="table mt-3">
							<thead>
								<tr>
									<th scope="col">#</th>
									<th scope="col">Ad Soyad</th>
									<th scope="col">Konu</th>
									<th scope="col">Durum</th>
									<th scope="col">Sil</th>
									<th scope="col">Cevaplandı İşaretle</th>
									<th scope="col">Cevaplanmadı İşaretle</th>
									<th scope="col">Detaylar</th>
								</tr>
							</thead>
							<tbody>
								@foreach (var item in Model)
								{
									count++;
									<tr>
										<th>@count</th>
										<td>@item.NameSurname</td>
										<td>@item.Subject</td>
										<td>
											@if (item.Status)
											{
												<span class="badge badge-success">Cevaplandı</span>
											}
											else
											{
												<span class="badge badge-danger">Cevaplanmadı</span>
											}
										</td>
										<td><a href="/Message/DeleteMessage/@item.MessageID" class="btn btn-outline-danger">Sil</a></td>
										<td><a href="/Message/MessageStatusChangeToTrue/@item.MessageID" class="btn btn-outline-success">Cevaplandı</a></td>
										<td><a href="/Message/MessageStatusChangeToFalse/@item.MessageID" class="btn btn-outline-warning">Cevaplanmadı</a></td>
										<td>
											<button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#messageModal@(item.MessageID)">
												Detaylar
											</button>
										</td>
									</tr>
									 
									<div class="modal fade" id="messageModal@(item.MessageID)" tabindex="-1" role="dialog" aria-labelledby="messageModalLabel@(item.MessageID)" aria-hidden="true">
										<div class="modal-dialog modal-lg" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<h5 class="modal-title" id="messageModalLabel@(item.MessageID)">Mesaj Detayları</h5>
													<button type="button" class="close" data-dismiss="modal" aria-label="Close">
														<span aria-hidden="true">&times;</span>
													</button>
												</div>
												<div class="modal-body">
													<div class="row mb-3">
														<div class="col-md-6">
															<strong>Ad Soyad:</strong>
															<p>@item.NameSurname</p>
														</div>
														<div class="col-md-6">
															<strong>Email:</strong>
															<p>@item.Mail</p>
														</div>
													</div>
													<div class="row mb-3">
														<div class="col-md-6">
															<strong>Telefon:</strong>
															<p>@item.Phone</p>
														</div>
														<div class="col-md-6">
															<strong>Gönderim Tarihi:</strong>
															<p>@item.MessageSendDate.ToString("dd.MM.yyyy HH:mm")</p>
														</div>
													</div>
													<div class="row mb-3">
														<div class="col-md-12">
															<strong>Konu:</strong>
															<p>@item.Subject</p>
														</div>
													</div>
													<div class="row mb-3">
														<div class="col-md-12">
															<strong>Mesaj İçeriği:</strong>
															<p class="bg-light p-3 rounded">@item.MessageContent</p>
														</div>
													</div>
													<div class="row">
														<div class="col-md-12">
															<strong>Durum:</strong>
															@if (item.Status)
															{
																<span class="badge badge-success">Cevaplandı</span>
															}
															else
															{
																<span class="badge badge-danger">Cevaplanmadı</span>
															}
														</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary" data-dismiss="modal">Kapat</button>
												</div>
											</div>
										</div>
									</div>
								}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>